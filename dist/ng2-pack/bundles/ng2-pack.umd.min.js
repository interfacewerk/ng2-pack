!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("ngx-dropdown"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng2-pack",["exports","@angular/core","@angular/forms","ngx-dropdown","@angular/common"],e):e((t=t||self)["ng2-pack"]={},t.ng.core,t.ng.forms,t.ngxDropdown,t.ng.common)}(this,(function(t,e,n,o,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function r(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)l.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return l}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t}var s={Enter:13,Escape:27};s[s.Enter]="Enter",s[s.Escape]="Escape";var a=function(){function t(t,n){this.element=t,this.renderer=n,this.onEnter=new e.EventEmitter,this.contentEditable=!0}return Object.defineProperty(t.prototype,"iwInlineEditable",{set:function(t){this.contentEditable=t},enumerable:!0,configurable:!0}),t.prototype.startEditing=function(){this.originalContent=this.content},t.prototype.keyPressed=function(t){switch(t.keyCode){case s.Enter:t.stopPropagation(),this.onEnter.emit(this.content);break;case s.Escape:this.cancelEditing()}},Object.defineProperty(t.prototype,"isChanged",{get:function(){return this.originalContent!==this.content},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.element.nativeElement.textContent.trim()},set:function(t){this.renderer.setElementProperty(this.element,"innerText",t)},enumerable:!0,configurable:!0}),t.prototype.cancelEditing=function(){this.content=this.originalContent},t.decorators=[{type:e.Directive,args:[{selector:"[iwInlineEditable]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer}]},t.propDecorators={iwInlineEditable:[{type:e.Input,args:["iwInlineEditable"]}],onEnter:[{type:e.Output}],contentEditable:[{type:e.HostBinding,args:["attr.contenteditable"]}],startEditing:[{type:e.HostListener,args:["focus"]}],keyPressed:[{type:e.HostListener,args:["keydown",["$event"]]}]},t}();var u=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[a],exports:[a]}]}],t}(),c=function(){function t(){}return t.prototype.transform=function(t,e,n){return void 0===e&&(e="—"),void 0===t||this.isEmptyString(t)?e:t},t.prototype.isEmptyString=function(t){return"string"==typeof t&&""===t.trim()},t.decorators=[{type:e.Pipe,args:[{name:"defaultValue"}]}],t}(),d={table:{sort:"Sort",addLeft:"Add column to the left",addRight:"Add column to the right",subFields:"Subfields in the column",removeColumn:"Remove this column",typeToSearch:"Type to search"}},p={table:{sort:"Sortieren",addLeft:"Spalte links hinzufügen",addRight:"Spalte rechts hinzufügen",subFields:"Felder in der Spalte",removeColumn:"Diese Spalte entfernen",typeToSearch:"Tippen zum Suchen"}};var m=function(){function t(){this.language="en",this.translations={en:d,de:p}}return t.prototype.get=function(t,e){if(void 0===e&&(e=this.language),!this.translations)return console.error("I18nService is used without initialization with translations"),"";var n=t.split("."),o="";try{o=n.reduce((function(t,e){return t[e]}),this.translations[e])}catch(e){console.error('Unknown key "'+t+'" was used!')}return o},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}();var g=function(){function t(t){this.i18nService=t}return t.prototype.transform=function(t,e){return this.i18nService.get(t)},t.decorators=[{type:e.Pipe,args:[{name:"t"}]}],t.ctorParameters=function(){return[{type:m}]},t}();var f,b,h=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[c,g],exports:[c,g]}]}],t}(),y=function(){function t(t){this.elementRef=t,this.draggable=!0,this.droppable=!0,this.dropArea="defaultDropArea",this.lastEvent="",this.updateElements=function(t,e){var n=e.elementRef.nativeElement.parentNode,o=t.elementRef.nativeElement,i=e.elementRef.nativeElement,r=Array.prototype.indexOf.call(n.children,o),l=Array.prototype.indexOf.call(n.children,i);r===l||(r<l?n.insertBefore(o,i.nextSibling||i):n.insertBefore(o,i.previousSibling||i))}}return t.prototype.onDragStart=function(t){t.dataTransfer?(t.dataTransfer.effectAllowed="move",f=this,b=this.elementRef.nativeElement.nextSibling):console.warn("no data transfer")},t.prototype.onDragEnter=function(t){this.lastEvent="dragenter",t.preventDefault(),f!==this&&f.dropArea===this.dropArea&&this.updateElements(f,this)},t.prototype.onDragOver=function(t){t.preventDefault()},t.prototype.onDragEnd=function(t){"drop"!==this.lastEvent&&f.dropArea===this.dropArea&&void 0!==b&&(b.parentNode.insertBefore(f.elementRef.nativeElement,b),b=void 0)},t.prototype.onDrop=function(t){this.lastEvent="drop",t.stopPropagation(),this!==f&&(b=void 0)},t.decorators=[{type:e.Directive,args:[{selector:"[iwSortableItem]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t.propDecorators={draggable:[{type:e.HostBinding,args:["attr.draggable"]}],droppable:[{type:e.HostBinding,args:["attr.droppable"]}],dropArea:[{type:e.Input}],onDragStart:[{type:e.HostListener,args:["dragstart",["$event"]]}],onDragEnter:[{type:e.HostListener,args:["dragenter",["$event"]]}],onDragOver:[{type:e.HostListener,args:["dragover",["$event"]]}],onDragEnd:[{type:e.HostListener,args:["dragend",["$event"]]}],onDrop:[{type:e.HostListener,args:["drop",["$event"]]}]},t}();var v=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[y],exports:[y]}]}],t}();var C=function(){function t(t,e,n){void 0===n&&(n=[]),this.config=t,this._currentSortDirection=e,this.activeFields=n}return Object.defineProperty(t.prototype,"initialSortDirection",{get:function(){return this.config.initialSortDirection||"asc"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentSortDirection",{get:function(){return this._currentSortDirection||"asc"},set:function(t){this._currentSortDirection=t},enumerable:!0,configurable:!0}),t.prototype.toggleDirection=function(){return this._currentSortDirection?this.currentSortDirection="desc"===this.currentSortDirection?"asc":"desc":this.currentSortDirection=this.initialSortDirection,this.currentSortDirection},t}();var w=function(){function t(){}return t.prototype.detectColumnConfiguration=function(t){var e=this.detectColumnLookup(t);return[e,this.columnsLookup2Config(e)]},t.prototype.detectColumnLookup=function(t){var e={};return t.forEach((function(t){Object.keys(t).forEach((function(n){if(void 0===e[n]){var o={id:n,sortType:typeof t[n],sortingDisabled:!1,initialSortDirection:"asc"};e[n]=new C(o)}}))})),e},t.prototype.columnsConfig2Lookup=function(t){var e={};return t.forEach((function(t){var n=[];void 0!==t.subFields&&(n=t.subFields.filter((function(t){return t.isVisible})).map((function(t){return t.id})));var o=new C(t);o.activeFields=n,e[t.id]=o})),e},t.prototype.columnsLookup2Config=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n].config);return e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}();var x={number:function(t,e){return t-e},string:function(t,e){return void 0===t?-1:t.localeCompare(e)},other:function(t,e){return t>e?1:e>t?-1:0}},E=function(){function t(){}return t.prototype.sort=function(t,e){var n=e.config.sortType||"other",o=e.config.sortCompare||x[n];return o||(console.warn("Unsupported sorting type '"+n+"' was used. Using comparison operators: greater, less and equal (>, <, ===)"),o=x.other),t.sort((function(t,n){return o(t[e.config.id],n[e.config.id])})),"desc"===e.currentSortDirection&&t.reverse(),t},t.decorators=[{type:e.Injectable}],t}();var S=new e.InjectionToken("TableDefaults"),I={reorderingEnabled:!0,rowsSortingMode:"default",inlineEditingEnabled:!1,changeColumnVisibility:!0,language:"en"},O=function(){function t(t,n,o,i,r){this.elementRef=t,this.tableSortingService=n,this.tableInitService=o,this.i18nService=i,this.addColumn=new e.EventEmitter,this.removeColumn=new e.EventEmitter,this.sortColumn=new e.EventEmitter,this.reorderColumns=new e.EventEmitter,this.rowClick=new e.EventEmitter,this.visibleColumnsChange=new e.EventEmitter,this.editCell=new e.EventEmitter,this.toggleSubfield=new e.EventEmitter,this.customTemplate=!1,this.reorderingEnabled=r.reorderingEnabled,this.rowsSortingMode=r.rowsSortingMode,this.inlineEditingEnabled=r.inlineEditingEnabled,this.changeColumnVisibility=r.changeColumnVisibility,this.language=r.language}return Object.defineProperty(t.prototype,"columnsConfig",{get:function(){return this._columnsConfig},set:function(t){this._columnsConfig=t,this.columnsLookup=this.tableInitService.columnsConfig2Lookup(this.columnsConfig)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleColumns",{get:function(){return this._visibleColumns},set:function(t){this._visibleColumns=t,this.visibleColumnsChange.emit(this._visibleColumns)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{set:function(t){this.i18nService.language=t},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.initializeDefaults(),this.initialSort()},t.prototype.ngAfterViewInit=function(){var t=this;setTimeout((function(){t.customTemplate=1!==t.elementRef.nativeElement.children.length}))},t.prototype.isSorted=function(t,e){if(t){var n=t.config.id===this.sortedColumnName;if(e){var o=t.currentSortDirection===e;return n&&o}return n}},t.prototype.onRowClicked=function(t){this.rowClick.emit(t)},t.prototype.onSortColumn=function(t){this.sortColumn.emit(t),"default"===this.rowsSortingMode&&this.sortRows(this.rows,t)},t.prototype.onAddingColumn=function(t){this.addingColumnIndex=t},t.prototype.onReorderColumns=function(t){this.reorderColumns.emit(t)},t.prototype.onToggleSubfield=function(t){this.toggleSubfield.emit(t)},t.prototype.sortRows=function(t,e){var n=e.column;e.direction;return this.rows=this.tableSortingService.sort(t,this.columnsLookup[n]),this.sortedColumnName=n,this.rows},t.prototype.initialSort=function(){if(this.initialSortColumn&&this.rows){var t=this.initialSortColumn.slice(1),e="asc";"+"===this.initialSortColumn[0]?e="asc":"-"===this.initialSortColumn[0]?e="desc":t=this.initialSortColumn;var n=this.columnsLookup[t];n?(e=e||n.initialSortDirection,n.currentSortDirection=e,"default"===this.rowsSortingMode?this.sortRows(this.rows,{column:t,direction:e}):this.onSortColumn({column:t,direction:e})):console.warn("Missing configuration for column: "+t),this.sortedColumnName=t,this.initialSortColumn=void 0}},t.prototype.initializeDefaults=function(){var t,e=void 0===this.rows||0===this.rows.length;void 0!==this.columnsConfig||e||(t=r(this.tableInitService.detectColumnConfiguration(this.rows),2),this.columnsLookup=t[0],this._columnsConfig=t[1]),void 0===this.visibleColumns&&void 0!==this.columnsLookup&&(this.visibleColumns=Object.keys(this.columnsLookup))},t.decorators=[{type:e.Component,args:[{selector:"iw-table",template:'<ng-content></ng-content>\n<table *ngIf="!customTemplate" class="results-table table table-bordered table-striped">\n  <thead\n    iw-thead\n    (addColumn)="addColumn.emit($event)"\n    (removeColumn)="removeColumn.emit($event)"\n    (sortColumn)="onSortColumn($event)"\n    (addingColumn)="onAddingColumn($event)"\n    (reorderColumns)="onReorderColumns($event)"\n    (toggleSubfield)="onToggleSubfield($event)"\n  ></thead>\n  <tbody\n    iw-tbody\n    [addingColumnIndex]="addingColumnIndex"\n    (rowClick)="onRowClicked($event)"\n    (editCell)="editCell.emit($event)"\n  ></tbody>\n</table>\n',encapsulation:e.ViewEncapsulation.None,providers:[{provide:S,useValue:I}],styles:['.results{color:#4d4d4d}.results .panel-header{border-bottom:0}.results .panel-body{padding:0;margin:0 -1px;position:relative}.results .panel-footer{margin-top:-1px}.results .results-table--new-group-layer{position:absolute;top:0;left:0;z-index:2;width:100%;height:100%;background:rgba(255,255,255,.75)}.results-table-wrap{position:relative;overflow-x:visible;min-height:400px}.results-table{margin:0;border-collapse:separate;border-width:1px 0 0 1px;background:#fff;border-top-color:#d3d3d3;border-left-color:app-color(bluegray);box-shadow:none}.results-table thead{background:rgba(252,89,31,.55)}.results-table thead th{padding:.5rem;border-bottom-width:1px;border-color:#d3d3d3;vertical-align:top;background:#f4f4f4;box-shadow:inset 0 1px 0 rgba(255,255,255,.75),inset 1px 0 0 rgba(255,255,255,.5)}.results-table thead th:last-child{border-right-color:app-color(bluegray)}.results-table thead th:hover .col-menu{opacity:1}.results-table .person-link-th{width:20px}.results-table .combo-th{width:1%;padding-right:8px;padding-left:8px}.results-table .drag-column.ui-sortable-helper{opacity:.9;border-color:transparent;transform:translateY(-15px) rotate(1deg);box-shadow:inset 0 0 0 1px #9ab1ab,0 2px 3px rgba(0,0,0,.75);background:#e5e8e7}.results-table .drag-column.ui-sortable-helper .col-label{color:rgba(0,0,0,.95);text-shadow:none}.results-table .drag-column.ui-sortable-helper .btn-group{display:none}.results-table .ui-sortable-placeholder{visibility:visible!important;background:rgba(252,89,31,.85)!important;box-shadow:inset 0 3px 10px rgba(0,0,0,.5)}.results-table tfoot td{border-color:app-color(bluegray);border-width:0 1px 0 0}.results-table td,.results-table th{position:relative;padding-left:.5rem;padding-right:.5rem;border-color:#f0f0f0;border-width:0 1px 1px 0;font-weight:400}.results-table tbody tr{cursor:pointer}.results-table tbody tr:hover{background:#eee}.results-table tbody td{padding-top:.5rem;padding-bottom:.5rem;border-width:0 0 1px;font-size:12px;line-height:1.25}.results-table tbody .combo-td{border-left-width:1px;background-color:rgba(0,116,56,.05)}.results-table tbody td:last-child{border-right:1px solid}.results-table tbody tr:last-child td{border-bottom-color:#d3d3d3}.results-table tbody tr:last-child td:last-child{border-color-right:app-color(bluegray);border-color-bottom:#d3d3d3}.results-table .label{position:relative;top:-1px;padding-bottom:.2em;background:rgba(16,126,100,.75)}.results-table .label-tum{background:#157eaa}.results-table .btn-toggle{margin-top:.25rem}.results-table td.is-sorted{background-color:rgba(212,221,219,.2)}.results-table th.is-sorted{position:relative;border-color:rgba(183,199,195,.75);background-color:#e1eae7;background-image:none}.results-table th.is-sorted:before{content:"";position:absolute;top:-1px;right:-1px;left:-1px;height:1px;background:rgba(183,199,195,.4)}.results-table th.is-sorted:after{content:"";position:absolute;top:-1px;bottom:-1px;left:-1px;width:1px;background:rgba(183,199,195,.75)}.col-label{position:relative;display:inline-block;padding:5px 0;width:100%;font-size:10px;line-height:18px;font-weight:700;text-transform:uppercase;text-shadow:0 1px 0 rgba(255,255,255,.66);color:rgba(0,0,0,.5);cursor:pointer;transition:color .2s}.is-sorted .col-label{color:rgba(0,0,0,.66)}.col-menu{position:absolute;text-align:right;right:7px;top:9px;opacity:0;transition:opacity .2s;height:1.5rem;width:1.5rem}.col-menu .dropdown-toggle{display:block;width:100%;height:100%;padding:0 1rem .25rem 0;background-color:#1aa0d8;transition:background-color .2s;color:#fff;border:none}.col-menu .dropdown-toggle:disabled{opacity:.65}.col-menu .dropdown-toggle:hover{background-color:#157eaa}.col-menu .dropdown-toggle:after{margin-left:.5rem;margin-right:.55rem}.col-menu.open{opacity:1}.multi-result+.multi-result{margin-top:.5rem}.ico-col-sort{opacity:.45}.ico-col-sort i:nth-child(3){display:block;line-height:18px;font-size:12px;padding-left:.5em}.tbl-msg{padding:24px;font-size:18px;text-align:center;color:#8a8a8a}.tbl-msg p{margin:0}.cell-list{margin-top:-.35rem;margin-bottom:-.3rem;font-size:13px}.cell-list small{font-size:90%}.cell-list-item{padding-top:.5em;padding-bottom:.5em}.cell-list-extended{font-size:0;opacity:0;transform:scaleY(0);transform-origin:0 0;transition:font-size .4s,opacity .4s,transform .4s}.cell-list-extended.is-visible{font-size:13px;opacity:1;transform:scaleY(1)}.cell-list-extended .cell-list-item{border-top:1px dotted rgba(0,0,0,.1)}.cell-list-item--extended{border-top:1px dotted rgba(0,0,0,.1);font-size:0;opacity:0;transform:scaleY(0);transform-origin:0 0;transition:font-size .3s,opacity .3s,transform .3s}.cell-list-items.show-all .cell-list-item--extended{font-size:13px;opacity:1;transform:scaleY(1)}.cell-list-expand-toggle{cursor:pointer}.cell-list-expand-toggle .icon{transform-origin:50% 45%;transition:transform .4s}.cell-list-expand-toggle.is-open .icon{transform:rotate(180deg)}.space-right{margin-right:.5em}.ico-col-sort{position:relative;display:inline-block;opacity:0;color:rgba(0,0,0,.5);text-shadow:0 1px 0 rgba(255,255,255,.66);transition:opacity .2s,color .2s}.ico-col-sort i{display:inline-block;line-height:9px;vertical-align:top;font-style:normal;font-size:8px;font-weight:400;font-family:Verdana,sans-serif}.ico-col-sort i:nth-child(1){position:absolute;top:0;left:0}.ico-col-sort i:nth-child(2){position:absolute;bottom:0;left:0}.is-sorted--asc .ico-col-sort--asc,.is-sorted--desc .ico-col-sort--desc{opacity:.9}']}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:E},{type:w},{type:m},{type:void 0,decorators:[{type:e.Inject,args:[S]}]}]},t.propDecorators={columnsConfig:[{type:e.Input}],visibleColumns:[{type:e.Input}],rows:[{type:e.Input}],reorderingEnabled:[{type:e.Input}],changeColumnVisibility:[{type:e.Input}],rowsSortingMode:[{type:e.Input}],inlineEditingEnabled:[{type:e.Input}],language:[{type:e.Input}],initialSortColumn:[{type:e.Input}],addColumn:[{type:e.Output}],removeColumn:[{type:e.Output}],sortColumn:[{type:e.Output}],reorderColumns:[{type:e.Output}],rowClick:[{type:e.Output}],visibleColumnsChange:[{type:e.Output}],editCell:[{type:e.Output}],toggleSubfield:[{type:e.Output}]},t}();var k=function(){function t(t,n,o){this.elementRef=t,this.tableInitService=n,this.rowClick=new e.EventEmitter,this.editCell=new e.EventEmitter,this.customTemplate=!1,this.customCells=[],this.cellTemplates={},this.tableComponent=o}return Object.defineProperty(t.prototype,"inlineEditingEnabled",{get:function(){return this.isEditable||this.delegateInput("inlineEditingEnabled",!1)},set:function(t){this.isEditable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows||this.delegateInput("rows",[])},set:function(t){this._rows=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnsConfig",{get:function(){return this._columnsConfig||this.delegateInput("columnsConfig",[])},set:function(t){this._columnsConfig=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleColumns",{get:function(){return this._visibleColumns||this.delegateInput("visibleColumns",[])},set:function(t){this._visibleColumns=t},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var t=this;setTimeout((function(){t.customTemplate=t.elementRef.nativeElement.children.length>t.rows.length}))},Object.defineProperty(t.prototype,"columnsLookup",{get:function(){var t=this._columnsLookup||this.tableComponent&&this.tableComponent.columnsLookup;return t||(t=this.tableInitService.columnsConfig2Lookup(this.columnsConfig),this._columnsLookup=t),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changeColumnVisibility",{get:function(){return this.tableComponent.changeColumnVisibility},enumerable:!0,configurable:!0}),t.prototype.isSorted=function(t,e){return this.tableComponent.isSorted(t,e)},t.prototype.column=function(t){return this.columnsLookup[t]},t.prototype.onRowClicked=function(t,e){this.rowClick.emit({rowIndex:t,rowObject:e})},t.prototype.onEditCell=function(t,e){if(t.isChanged&&t.column){var n={newValue:t.content,column:t.column.config.id,rowObject:t.row,rowIndex:e};this.editCell.emit(n)}},t.prototype.delegateInput=function(t,e){return this.tableComponent?this.tableComponent[t]:e},t.decorators=[{type:e.Component,args:[{selector:"[iw-tbody]",template:'<ng-content></ng-content>\n\n<ng-template [ngIf]="!customTemplate">\n  <tr *ngFor="let row of rows; let rowIndex = index" (click)="onRowClicked(rowIndex, row)" >\n    <ng-template ngFor let-columnName [ngForOf]="visibleColumns" let-index="index">\n      <td *ngIf="addingColumnIndex == index" class="combo-td"></td>\n      <td\n        #tdComponent\n        iw-td\n        [attr.contenteditable]="inlineEditingEnabled"\n        (blur)="onEditCell(tdComponent, rowIndex)"\n        [column]="column(columnName)"\n        [row]="row"\n        [class.is-sorted]="isSorted(column(columnName), undefined)"\n        attr.headers="col-id-{{ column(columnName)?.config.id }}">\n      </td>\n    </ng-template>\n    <td *ngIf="changeColumnVisibility" class="combo-td"> \x3c!-- empty for combobox --\x3e </td>\n  </tr>\n</ng-template>\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:w},{type:O,decorators:[{type:e.Optional}]}]},t.propDecorators={addingColumnIndex:[{type:e.Input}],inlineEditingEnabled:[{type:e.Input}],rows:[{type:e.Input}],columnsConfig:[{type:e.Input}],visibleColumns:[{type:e.Input}],rowClick:[{type:e.Output}],editCell:[{type:e.Output}]},t}();var D=function(){function t(t,n,o,i){this.elementRef=t,this.changeDetectorRef=n,this.tableInitService=o,this.addColumn=new e.EventEmitter,this.removeColumn=new e.EventEmitter,this.sortColumn=new e.EventEmitter,this.addingColumn=new e.EventEmitter,this.reorderColumns=new e.EventEmitter,this.toggleSubfield=new e.EventEmitter,this.lastColumnComboboxActive=!1,this.customTemplate=!1,this.tableComponent=i}return Object.defineProperty(t.prototype,"columnsConfig",{get:function(){return this._columnsConfig||this.delegateInput("columnsConfig",[])},set:function(t){this.tableComponent?this.tableComponent.columnsConfig=t:this._columnsConfig=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleColumns",{get:function(){return this._visibleColumns||this.delegateInput("visibleColumns",[])},set:function(t){this.tableComponent?this.tableComponent.visibleColumns=t:this._visibleColumns=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changeColumnVisibility",{get:function(){return!!this.tableComponent&&this.tableComponent.changeColumnVisibility},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.reorderingEnabled&&this.initializeSortable()},t.prototype.ngAfterViewInit=function(){var t=this;setTimeout((function(){t.customTemplate=1!==t.elementRef.nativeElement.children.length}))},Object.defineProperty(t.prototype,"columnsLookup",{get:function(){var t=this._columnsLookup||this.tableComponent&&this.tableComponent.columnsLookup;return void 0===t&&(t=this.tableInitService.columnsConfig2Lookup(this.columnsConfig),this._columnsLookup=t),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reorderingEnabled",{get:function(){return this._reorderingEnabled||this.delegateInput("reorderingEnabled",!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLastAddingColumnVisible",{get:function(){return this.lastColumnComboboxActive||this.addingColumnIndex===this.visibleColumns.length},enumerable:!0,configurable:!0}),t.prototype.isSorted=function(t,e){return!!this.tableComponent&&this.tableComponent.isSorted(t,e)},t.prototype.column=function(t){return this.columnsLookup[t]},t.prototype.selectNewColumn=function(t,e){this.addingColumnIndex=null,this.lastColumnComboboxActive=!1,this.visibleColumns=void 0!==e?l(this.visibleColumns.slice(0,e),[t.value],this.visibleColumns.slice(e)):l(this.visibleColumns,[t.value]),this.addColumn.emit(t.value)},t.prototype.toggleCombobox=function(){var t=this;this.lastColumnComboboxActive=!this.lastColumnComboboxActive,this.lastColumnComboboxActive&&setTimeout((function(){jQuery(t.elementRef.nativeElement).scrollLeft(99999)}),0)},t.prototype.onAddCombobox=function(t){this.lastColumnComboboxActive=!1,this.addingColumnIndex=t,this.addingColumn.emit(t)},t.prototype.onSortColumn=function(t){this.tableComponent&&(this.tableComponent.sortedColumnName=t.column),this.sortColumn.emit(t)},t.prototype.onToggleSubfield=function(t){this.toggleSubfield.emit(t)},t.prototype.initializeSortable=function(){var t=this;jQuery(this.elementRef.nativeElement).sortable({cursor:"move",axis:"x",tolerance:"pointer",items:".drag-column",handle:".col-label",update:function(){t.draggedColumnId="";var e=jQuery(t.elementRef.nativeElement).sortable("toArray",{attribute:"data-col-ref"});t.visibleColumns=e,t.reorderColumns.emit(e),t.changeDetectorRef.detectChanges()}}),jQuery(this.elementRef.nativeElement).disableSelection()},t.prototype.delegateInput=function(t,e){return this.tableComponent?this.tableComponent[t]:e},t.decorators=[{type:e.Component,args:[{selector:"[iw-thead]",template:'<ng-content></ng-content>\n\n<tr *ngIf="!customTemplate">\n  <ng-template  ngFor let-columnName [ngForOf]="visibleColumns" let-columnIndex="index">\n    <th *ngIf="addingColumnIndex == columnIndex" class="combo-th">\n      <div class="add-column combobox is-active">\n        <iw-add-column\n          [visibleColumns]="visibleColumns"\n          (close)="onAddCombobox(undefined)"\n          (selected)="selectNewColumn($event, columnIndex)"\n          attr.id="combobox-{{columnIndex}}">\n        </iw-add-column>\n      </div>\n    </th>\n    <th\n      iw-th\n      [column]="column(columnName)"\n      [changeVisibility]="changeColumnVisibility"\n      (removeColumn)="removeColumn.emit($event)"\n      (sortColumn)="onSortColumn($event)"\n      (addCombobox)="onAddCombobox($event + columnIndex)"\n      (toggleSubfield)="onToggleSubfield($event)"\n      class="drag-column"\n      attr.data-col-ref="{{ column(columnName)?.config.id }}"\n      attr.id="col-id-{{ column(columnName)?.config.id }}"\n      [class.is-sorted]="isSorted(column(columnName), undefined)"\n      [class.is-sorted--asc]="isSorted(column(columnName), \'asc\')"\n      [class.is-sorted--desc]="isSorted(column(columnName), \'desc\')">\n    </th>\n  </ng-template>\n  <th *ngIf="changeColumnVisibility" class="combo-th">\n    <div class="add-column combobox" [ngClass]="lastColumnComboboxActive ? \'is-active\' : \'is-inactive\'">\n      <iw-add-column\n        *ngIf="lastColumnComboboxActive"\n        [visibleColumns]="visibleColumns"\n        (close)="toggleCombobox()"\n        (selected)="selectNewColumn($event, undefined)"\n      ></iw-add-column>\n      <span\n        *ngIf="!lastColumnComboboxActive"\n        (click)="toggleCombobox()"\n        class="add-column-button combo-toggle btn btn-sm btn-success"\n      >+</span>\n    </div>\n  </th>\n</tr>\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.ChangeDetectorRef},{type:w},{type:O,decorators:[{type:e.Optional}]}]},t.propDecorators={columnsConfig:[{type:e.Input}],visibleColumns:[{type:e.Input}],addColumn:[{type:e.Output}],removeColumn:[{type:e.Output}],sortColumn:[{type:e.Output}],addingColumn:[{type:e.Output}],reorderColumns:[{type:e.Output}],toggleSubfield:[{type:e.Output}]},t}();var P=function(){function t(t){this.changeVisibility=!0,this.removeColumn=new e.EventEmitter,this.sortColumn=new e.EventEmitter,this.addCombobox=new e.EventEmitter,this.toggleSubfield=new e.EventEmitter,this.tableComponent=t}return Object.defineProperty(t.prototype,"rowsSortingMode",{get:function(){return this._rowsSortingMode||this.delegateInput("rowsSortingMode","default")},set:function(t){this._rowsSortingMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleColumns",{get:function(){return this._visibleColumns||this.delegateInput("visibleColumns",[])},set:function(t){this.tableComponent?this.tableComponent.visibleColumns=t:this._visibleColumns=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnsConfig",{get:function(){return this._columnsConfig||this.delegateInput("columnsConfig",[])},set:function(t){this._columnsConfig=t},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},Object.defineProperty(t.prototype,"hasAllColumnsVisble",{get:function(){return this.visibleColumns.length===this.columnsConfig.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLastColumn",{get:function(){return 1!==this.visibleColumns.length},enumerable:!0,configurable:!0}),t.prototype.isSortingDisabled=function(t){if(t)return"disabled"===this.rowsSortingMode||t.config.sortingDisabled},t.prototype.showSortIcon=function(t,e,n){return!!t&&(!this.isSortingDisabled(t)&&(t.config.sortType===e&&t.currentSortDirection===n))},t.prototype.onSortColumn=function(t,e){this.isSortingDisabled(t)||(e?t.currentSortDirection=e:e=t.toggleDirection(),this.sortColumn.emit({column:t.config.id,direction:e}))},t.prototype.onRemoveColumn=function(t){var e=this.visibleColumns.indexOf(t);this.visibleColumns=l(this.visibleColumns.slice(0,e),this.visibleColumns.slice(e+1)),this.removeColumn.emit(t)},t.prototype.onToggleSubfield=function(t,e){var n=t.activeFields.indexOf(e);-1===n?t.activeFields.push(e):t.activeFields.splice(n,1),this.toggleSubfield.emit({column:t.config.id,activeSubfields:t.activeFields,toggleSubfield:e})},t.prototype.delegateInput=function(t,e){return this.tableComponent?this.tableComponent[t]:e},t.decorators=[{type:e.Component,args:[{selector:"[iw-th]",template:'<div>\n\n  \x3c!-- NOTE: do not use pointer cursor when sorting is disabled --\x3e\n  <span class="col-label" (click)="onSortColumn(column)" >\n    {{ column?.config.text || column?.config.id  }}\n    <i *ngIf="showSortIcon(column, \'string\', \'asc\')" class="ico-col-sort ico-col-sort--asc"><i>A</i><i>Z</i><i>↓</i></i>\n    <i *ngIf="showSortIcon(column, \'string\', \'desc\')" class="ico-col-sort ico-col-sort--desc"><i>Z</i><i>A</i><i>↓</i></i>\n    <i *ngIf="showSortIcon(column, \'number\', \'asc\')" class="ico-col-sort ico-col-sort--asc"><i>0</i><i>9</i><i>↓</i></i>\n    <i *ngIf="showSortIcon(column, \'number\', \'desc\')" class="ico-col-sort ico-col-sort--desc"><i>9</i><i>0</i><i>↓</i></i>\n  </span>\n\n  <div class="btn-group col-menu" dropdown>\n    <a\n      dropdown-open\n      class="btn btn-sm btn-secondary dropdown-toggle"\n      [id]="column?.config.id + \'-dropdown\'">\n    </a>\n\n    <ul class="dropdown-menu dropdown-menu-right" dropdownMenu attr.aria-labelledby="{{column?.config.id}}-dropdown">\n\n      <li *ngIf="!isSortingDisabled(column)">\n        <a class="dropdown-item" (click)="onSortColumn(column, \'asc\')">\n          {{ \'table.sort\' | t}}\n          <span *ngIf="column?.config.sortType === \'number\'">0&rarr;9</span>\n          <span *ngIf="column?.config.sortType !== \'number\'">A&rarr;Z</span>\n        </a>\n      </li>\n\n      <li *ngIf="!isSortingDisabled(column)">\n        <a class="dropdown-item" (click)="onSortColumn(column, \'desc\')">\n          {{ \'table.sort\' | t}}\n          <span *ngIf="column?.config.sortType === \'number\'">9&rarr;0</span>\n          <span *ngIf="column?.config.sortType !== \'number\'">Z&rarr;A</span>\n        </a>\n      </li>\n\n      \x3c!-- NOTE: do not display divider when adding columns is disabled --\x3e\n      <li *ngIf="!isSortingDisabled(column) && changeVisibility" class="divider dropdown-divider"></li>\n      \x3c!-- NOTE: should it be disabled when there are no columns to add  --\x3e\n      <li *ngIf="changeVisibility">\n        <a [class.disabled]="hasAllColumnsVisble" class="dropdown-item" (click)="!hasAllColumnsVisble && addCombobox.emit(0)">\n          {{ \'table.addLeft\' | t}}\n        </a>\n      </li>\n\n      <li *ngIf="changeVisibility">\n        <a [class.disabled]="hasAllColumnsVisble" class="dropdown-item" (click)="!hasAllColumnsVisble && addCombobox.emit(1)">\n          {{ \'table.addRight\' | t}}\n        </a>\n      </li>\n\n      <li *ngIf="column?.config.subFields" class="divider dropdown-divider"></li>\n      <li *ngIf="column?.config.subFields" class="dropdown-item-group" dropdown-not-closable-zone>\n        <span class="dropdown-header">{{ \'table.subFields\' | t}}</span>\n\n        <div *ngFor="let subfield of column?.config.subFields">\n          <label class="dropdown-item c-input c-checkbox">\n            <input type="checkbox"\n                (change)="onToggleSubfield(column, subfield.id)"\n                [checked]="subfield.isVisible"\n            >\n            <span class="c-indicator"></span>\n            {{subfield.text || subfield.id }}\n          </label>\n        </div>\n      </li>\n\n      <li *ngIf="changeVisibility" class="divider dropdown-divider"></li>\n      <li *ngIf="changeVisibility">\n        \x3c!-- disable removing column if it\'s the last one  --\x3e\n        \x3c!-- NOTE: is there a better way how to indicate that --\x3e\n        <a\n        [class.disabled]="visibleColumns.length === 1"\n        class="dropdown-item"\n        (click)="isLastColumn && onRemoveColumn(column?.config.id)">\n          {{ \'table.removeColumn\' | t}}\n        </a>\n      </li>\n\n    </ul>\n  </div>\n</div>\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:O,decorators:[{type:e.Optional}]}]},t.propDecorators={column:[{type:e.Input}],changeVisibility:[{type:e.Input}],rowsSortingMode:[{type:e.Input}],visibleColumns:[{type:e.Input}],columnsConfig:[{type:e.Input}],removeColumn:[{type:e.Output}],sortColumn:[{type:e.Output}],addCombobox:[{type:e.Output}],toggleSubfield:[{type:e.Output}]},t}();var T=function(){function t(t){this.defaultValuePipe=t}return t.prototype.transform=function(t,e){if(e){var n=this.applyFormatters(t,e.config.formatters);return this.defaultValuePipe.transform(n,"—")}},t.prototype.applyFormatters=function(t,e){return e?e.reduce((function(t,e){var n=e.arguments||[];return e.transform.apply(e,l([t],n))}),t):t},t.decorators=[{type:e.Pipe,args:[{name:"formatColumn"}]}],t.ctorParameters=function(){return[{type:c}]},t}();var V=function(){function t(t){this.formatColumnPipe=t}return t.prototype.ngOnInit=function(){},Object.defineProperty(t.prototype,"cellValue",{get:function(){if(this.column)return this.row[this.column.config.id]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.contentDiv.nativeElement.textContent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isChanged",{get:function(){return this.contentDiv.nativeElement.textContent.trim()!==this.formattedValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasSubfields",{get:function(){if(this.column)return this.column.config.subFields&&this.column.config.subFields.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formattedValue",{get:function(){if(this.column)return this.formatColumnPipe.transform(this.cellValue,this.column)},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Component,args:[{selector:"[iw-td]",template:'<div>\n  <div *ngIf="!column?.config.subFields" #contentDiv>\n    {{ cellValue | formatColumn: column }}\n  </div>\n\n  <div *ngIf="hasSubfields && cellValue && cellValue.length > 0">\n\n    <div class="cell-list" [ngSwitch]="(column.config.id)">\n\n      \x3c!-- TODO: default template for columns with subfields  --\x3e\n    </div>\n  </div>\n</div>\n',providers:[T],styles:[""]}]}],t.ctorParameters=function(){return[{type:T}]},t.propDecorators={column:[{type:e.Input}],row:[{type:e.Input}],contentDiv:[{type:e.ViewChild,args:["contentDiv",{static:!1}]}]},t}();var j=function(){function t(t){this.tableComponent=t,this.open=!0,this.selected=new e.EventEmitter,this.close=new e.EventEmitter,this.value=null}return t.prototype.ngOnChanges=function(t){var e=this.columnsNotVisibleInTable();this.items=this.categorizeColumns(e)},t.prototype.onSelected=function(t){var e=this;t&&(this.selected.emit({value:t}),setTimeout((function(){e.value=null}),0))},t.prototype.columnsNotVisibleInTable=function(){var t=this,e=[];return this.tableComponent.columnsConfig.forEach((function(n){-1===t.visibleColumns.indexOf(n.id)&&(n.text=n.text||n.id,e.push(n))})),e},t.prototype.categorizeColumns=function(t){if(0===t.filter((function(t){return void 0!==t.category})).length)return t;var e={},n=0,o=[];return t.forEach((function(t){var i=t.category&&t.category.id||"Other",r=e[i];if(void 0===r){e[i]=n++;var l={text:t.category&&t.category.text||i,children:[t]};o.push(l)}else o[r].children.push(t)})),o},t.decorators=[{type:e.Component,args:[{selector:"iw-add-column",template:'\x3c!-- NOTE: indicate no columns to add in a better way  --\x3e\n<div class="combo-input-wrap">\n  <iw-select2\n    [placeholder]="\'table.typeToSearch\' | t"\n    [items]="items"\n    [(ngModel)]="value"\n    [open]="open"\n    (close)="close.emit($event)"\n    (ngModelChange)="onSelected($event)">\n  </iw-select2>\n</div>\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:O}]},t.propDecorators={visibleColumns:[{type:e.Input}],open:[{type:e.Input}],selected:[{type:e.Output}],close:[{type:e.Output}]},t}();var R={provide:n.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return A})),multi:!0},A=function(){function t(t){this.elementRef=t,this.placeholder="",this.open=!1,this.close=new e.EventEmitter,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.ngOnInit=function(){this.updateData()},t.prototype.ngOnChanges=function(t){this.updateData()},t.prototype.ngOnDestroy=function(){this.removeSelect2()},t.prototype.writeValue=function(t){this.currentValue=t,this.element&&this.element.val(t).trigger("change")},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.onClose=function(t){this.close.emit(t)},t.prototype.removeSelect2=function(){this.element&&(this.element.off("select2:select"),this.element.select2("destroy"),this.element.remove(),this.element=null)},t.prototype.updateData=function(){var t=this;this.removeSelect2(),this.element=jQuery("<select></select>").attr("style","width:200px"),this.element.on("select2:select",(function(e){t.currentValue=t.element.val(),t.onChange(t.currentValue)})),this.element.on("select2:close",(function(e){t.onClose(e)})),this.elementRef.nativeElement.appendChild(this.element.get(0)),this.element.select2({data:this.items||[],placeholder:this.placeholder,multiple:this.multiple,tags:this.tags}),this.element.val(this.currentValue).trigger("change"),this.open&&this.element.select2("open")},t.decorators=[{type:e.Component,args:[{selector:"iw-select2",template:'\x3c!--<div>\n  <select style="width: 200px" #selector></select>\n</div>--\x3e\n',providers:[R],styles:[""]}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t.propDecorators={items:[{type:e.Input}],tags:[{type:e.Input}],multiple:[{type:e.Input}],placeholder:[{type:e.Input}],open:[{type:e.Input}],close:[{type:e.Output}]},t}();var L=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[h,i.CommonModule,n.FormsModule,o.DropdownModule],declarations:[O,D,k,j,A,V,P,T],exports:[O,D,k,j,A,V,P,T],providers:[E,w,m,c]}]}],t}();t.AddColumnComponent=j,t.ColumnState=C,t.DefaultValuePipe=c,t.FormatColumnPipe=T,t.InlineEditableDirective=a,t.InlineEditableModule=u,t.PipesModule=h,t.SortableItemDirective=y,t.SortableModule=v,t.TPipe=g,t.TableComponent=O,t.TableDefaults=S,t.TableInitService=w,t.TableModule=L,t.TableSortingService=E,t.TbodyComponent=k,t.TdComponent=V,t.ThComponent=P,t.TheadComponent=D,t.sortingCompare=x,t.tableDefaultValues=I,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng2-pack.umd.min.js.map